{"version":3,"sources":["ActiveBoundary.tsx"],"sourcesContent":["import React from 'react';\nimport { useEvent } from 'react-native-event';\nimport contains from 'react-native-contains';\nimport { BoundaryProvider, useBoundary, useRef } from 'react-ref-boundary';\n\nfunction Component({ children, isActive, setIsActive }) {\n  const ref = useRef<HTMLElement>(null);\n  const boundary = useBoundary();\n  useEvent(\n    (event) => {\n      if (!isActive) return;\n      for (let i = 0; i < boundary.refs.length; i++) {\n        const x = boundary.refs[i] as React.RefObject<HTMLElement>;\n        if (x.current && contains(x.current, event.target)) return;\n      }\n      setIsActive(false);\n    },\n    [isActive, setIsActive],\n  );\n\n  return (\n    <React.Fragment>\n      {React.Children.map<React.ReactNode, React.ReactNode>(children, (child) =>\n        React.isValidElement(child)\n          ? React.cloneElement(child, { isActive, setIsActive, ref })\n          : child,\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default function ActiveBoundary({ children }) {\n  const state = React.useState<boolean>(false);\n  const isActive = state[0];\n  const setIsActive = state[1];\n\n  return (\n    <BoundaryProvider>\n      <Component isActive={isActive} setIsActive={setIsActive}>\n        {children}\n      </Component>\n    </BoundaryProvider>\n  );\n}\n"],"names":["ActiveBoundary","children","state","React","useState","isActive","setIsActive","BoundaryProvider","Component","ref","useRef","boundary","useBoundary","useEvent","event","i","refs","length","x","current","contains","target","Fragment","Children","map","child","isValidElement","cloneElement"],"mappings":"AAAA;;;;kBA+BwBA,cAAc;AA/BpB,IAAA,MAAO,kCAAP,OAAO,EAAA;AACA,IAAA,iBAAoB,WAApB,oBAAoB,CAAA;AACxB,IAAA,oBAAuB,kCAAvB,uBAAuB,EAAA;AACU,IAAA,iBAAoB,WAApB,oBAAoB,CAAA;AA4B3D,SAASA,cAAc,CAAC,KAAY,EAAE;QAAd,AAAEC,QAAQ,GAAV,KAAY,CAAVA,QAAQ,AAAE;IACjD,IAAMC,KAAK,GAAGC,MAAK,QAAA,CAACC,QAAQ,CAAU,KAAK,CAAC,AAAC;IAC7C,IAAMC,QAAQ,GAAGH,KAAK,CAAC,CAAC,CAAC,AAAC;IAC1B,IAAMI,WAAW,GAAGJ,KAAK,CAAC,CAAC,CAAC,AAAC;IAE7B,qBACE,6BAACK,iBAAgB,iBAAA,sBACf,6BAACC,SAAS;QAACH,QAAQ,EAAEA,QAAQ;QAAEC,WAAW,EAAEA,WAAW;OACpDL,QAAQ,CACC,CACK,CACnB;CACH;;;;;;AAtCD,SAASO,SAAS,CAAC,KAAmC,EAAE;QAAnCP,QAAQ,GAAV,KAAmC,CAAjCA,QAAQ,EAAEI,QAAQ,GAApB,KAAmC,CAAvBA,QAAQ,EAAEC,WAAW,GAAjC,KAAmC,CAAbA,WAAW;IAClD,IAAMG,GAAG,GAAGC,CAAAA,GAAAA,iBAAM,AAAmB,CAAA,OAAnB,CAAc,IAAI,CAAC,AAAC;IACtC,IAAMC,QAAQ,GAAGC,CAAAA,GAAAA,iBAAW,AAAE,CAAA,YAAF,EAAE,AAAC;IAC/BC,CAAAA,GAAAA,iBAAQ,AAUP,CAAA,SAVO,CACN,SAACC,KAAK,EAAK;QACT,IAAI,CAACT,QAAQ,EAAE,OAAO;QACtB,IAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,QAAQ,CAACK,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,CAAE;YAC7C,IAAMG,CAAC,GAAGP,QAAQ,CAACK,IAAI,CAACD,CAAC,CAAC,AAAgC,AAAC;YAC3D,IAAIG,CAAC,CAACC,OAAO,IAAIC,CAAAA,GAAAA,oBAAQ,AAAyB,CAAA,QAAzB,CAACF,CAAC,CAACC,OAAO,EAAEL,KAAK,CAACO,MAAM,CAAC,EAAE,OAAO;SAC5D;QACDf,WAAW,CAAC,KAAK,CAAC,CAAC;KACpB,EACD;QAACD,QAAQ;QAAEC,WAAW;KAAC,CACxB,CAAC;IAEF,qBACE,6BAACH,MAAK,QAAA,CAACmB,QAAQ,QACZnB,MAAK,QAAA,CAACoB,QAAQ,CAACC,GAAG,CAAmCvB,QAAQ,EAAE,SAACwB,KAAK;6BACpEtB,MAAK,QAAA,CAACuB,cAAc,CAACD,KAAK,CAAC,iBACvBtB,MAAK,QAAA,CAACwB,YAAY,CAACF,KAAK,EAAE;YAAEpB,QAAQ,EAARA,QAAQ;YAAEC,WAAW,EAAXA,WAAW;YAAEG,GAAG,EAAHA,GAAG;SAAE,CAAC,GACzDgB,KAAK;KAAA,CACV,CACc,CACjB;CACH"}